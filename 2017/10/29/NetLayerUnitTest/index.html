
<!DOCTYPE html>
<html lang="zh-cn,en,default">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="å¤§ä¸œå“¥">
    <title>å¦‚ä½•åœ¨iOSæ€»å•å…ƒæµ‹è¯•ç½‘ç»œå±‚ - å¤§ä¸œå“¥</title>
    <meta name="author" content="å¤§ä¸œå“¥">
    
    
    
    <meta name="description" content="ç½‘ç»œé€šä¿¡åœ¨æ¯ä¸ªiOSAPPä¸­éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å¯¹ç½‘ç»œå±‚è¿›è¡Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³å¿ƒçš„ä¸€ä¸ªé‡ç‚¹ï¼Œé‚£æˆ‘ä»¬ä»Šå¤©æ¥æ¢è®¨ä¸€ä¸‹">
<meta name="keywords" content="ç¿»è¯‘,iOS,UnitTest">
<meta property="og:type" content="blog">
<meta property="og:title" content="å¦‚ä½•åœ¨iOSæ€»å•å…ƒæµ‹è¯•ç½‘ç»œå±‚">
<meta property="og:url" content="https://mistdon.github.io/2017/10/29/NetLayerUnitTest/index.html">
<meta property="og:site_name" content="å¤§ä¸œå“¥">
<meta property="og:description" content="ç½‘ç»œé€šä¿¡åœ¨æ¯ä¸ªiOSAPPä¸­éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å¯¹ç½‘ç»œå±‚è¿›è¡Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³å¿ƒçš„ä¸€ä¸ªé‡ç‚¹ï¼Œé‚£æˆ‘ä»¬ä»Šå¤©æ¥æ¢è®¨ä¸€ä¸‹">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="https://mistdon.github.io/_images/20171030_001.jpg">
<meta property="og:image" content="https://mistdon.github.io/2017/10/29/NetLayerUnitTest/_images/20171030_002.jpg">
<meta property="og:updated_time" content="2018-08-07T02:40:38.002Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¦‚ä½•åœ¨iOSæ€»å•å…ƒæµ‹è¯•ç½‘ç»œå±‚">
<meta name="twitter:description" content="ç½‘ç»œé€šä¿¡åœ¨æ¯ä¸ªiOSAPPä¸­éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å¯¹ç½‘ç»œå±‚è¿›è¡Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³å¿ƒçš„ä¸€ä¸ªé‡ç‚¹ï¼Œé‚£æˆ‘ä»¬ä»Šå¤©æ¥æ¢è®¨ä¸€ä¸‹">
<meta name="twitter:image" content="https://mistdon.github.io/_images/20171030_001.jpg">
    
    
        
    
    
        <meta property="og:image" content="https://mistdon.github.io/assets/images/sd_avatar.JPG"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-sxklfps8ywgfyyjcowvnb4gxdgt0zjts3hsguljmv9uqanxjbnitrovtbrek.min.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">å¤§ä¸œå“¥</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/sd_avatar.JPG" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/sd_avatar.JPG" alt="ä½œè€…çš„å›¾ç‰‡"/>
                </a>
                <h4 class="sidebar-profile-name">å¤§ä¸œå“¥</h4>
                
                    <h5 class="sidebar-profile-bio"><p>ç”Ÿæ´»æ— é™ç¾å¥½</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">åˆ†ç±»</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/momo13014" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://stackoverflow.com/users/6532225" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:shendong13014@gmail.com" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">é‚®ç®±</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            å¦‚ä½•åœ¨iOSæ€»å•å…ƒæµ‹è¯•ç½‘ç»œå±‚
        </h1>
    
    
        <div class="post-meta">
    <time itemprop="datePublished" datetime="2017-10-29T12:46:26+08:00">
	
		    10æœˆ 29, 2017
    	
    </time>
    
        <span>å‘å¸ƒåœ¨ </span>
        
    <a class="category-link" href="/categories/ç§»åŠ¨ç«¯/">ç§»åŠ¨ç«¯</a>


    
</div>

    
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>ç½‘ç»œé€šä¿¡åœ¨æ¯ä¸ªiOSAPPä¸­éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚<br>åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å¯¹ç½‘ç»œå±‚è¿›è¡Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³å¿ƒçš„ä¸€ä¸ªé‡ç‚¹ï¼Œé‚£æˆ‘ä»¬ä»Šå¤©æ¥æ¢è®¨ä¸€ä¸‹<br><a id="more"></a><br>åŸæ–‡é“¾æ¥ï¼š<a href="http://hoangtran.me/ios/testing/2016/09/12/unit-test-network-layer-in-ios/" target="_blank" rel="noopener">How to unit test your network layer in iOS</a><br>å½“ç”¨æˆ·ç‚¹å‡»appä¸­çš„UIå…ƒç´ ï¼Œé€šå¸¸éƒ½ä¼šæœ‰1ä¸ªæˆ–å¤šä¸ªç½‘ç»œè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼Œå»è¯·æ±‚æ›´æ–°çš„æ•°æ®ï¼Œè¿”å›ç»“æœç»™ç”¨æˆ·ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªç»å…¸çš„æ–°é—»Appçš„ä¸€ä¸ªç®€å•çš„ç½‘ç»œè¯·æ±‚ç”¨ä¾‹ï¼š</p>
<ul>
<li>è¯·æ±‚ç”¨æˆ·æˆæƒ</li>
<li>è¯·æ±‚æ–°é—»æ¥æºåˆ—è¡¨: Engadget, Mashable, Mediumç­‰ç­‰</li>
<li>å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ–°é—»æºçš„æ—¶å€™ï¼Œè¯·æ±‚æœ€è¿‘æ›´æ–°çš„æ–‡ç« </li>
<li>å½“ç”¨æˆ·ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªæ–‡ç« çš„æ—¶å€™ï¼Œè¯·æ±‚è¯¦æƒ…</li>
<li>å½“ç”¨æˆ·ç‚¹å‡»äº¤äº’æŒ‰é’®åï¼Œå°†æ‰€æœ‰æ–‡ç« æ ‡è®°ä¸ºå·²è¯»</li>
</ul>
<p><strong>ç½‘ç»œè¯·æ±‚æ— æ‰€ä¸åœ¨</strong>ï¼Œæˆ‘ä»¬ä¸ä»…åº”è¯¥æ¸…æ¥šçš„çŸ¥é“ç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸”åº”è¯¥æ›´å¥½çš„å»å®ç°å®ƒã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»RESTful APIæœåŠ¡å™¨ä¸­è·å–æ•°æ®çš„ç½‘ç»œå±‚ï¼Œå®ƒåŒ…æ‹¬<strong>è®¾è®¡</strong>ï¼Œ<strong>ç¼–ç¨‹</strong>ï¼Œä¹ŸåŒ…æ‹¬<strong>å•å…ƒæµ‹è¯•</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯è¯¦ç»†åˆ—è¡¨:</p>
<ul>
<li>1.è®¾è®¡åè®®</li>
<li>2.å®ç°åè®®<ul>
<li>NSURLSession</li>
<li>AFNetworking</li>
<li>Alamofire</li>
</ul>
</li>
<li>3.ä½¿ç”¨åè®®</li>
<li>4.ä¸ºåè®®ç¼–å†™å•å…ƒæµ‹è¯•<ul>
<li>å†™ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚ä½•å†™ï¼Ÿ</li>
<li>å‡†å¤‡æµ‹è¯•</li>
<li>å¼€å§‹å†™æµ‹è¯•ç”¨ä¾‹<ul>
<li>ç¬¬ä¸€æ­¥ï¼šè®¾ç½®å•å…ƒæµ‹è¯•çš„é¡¹ç›®</li>
<li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„specæ–‡ä»¶</li>
<li>ç¬¬ä¸‰æ­¥ï¼šå®ç°ä¸€ä¸ªçœŸå®ç½‘ç»œè¯·æ±‚çš„ç½‘ç»œè¯·æ±‚</li>
<li>ç¬¬å››æ­¥ï¼šåˆ›å»ºä¸€ä¸ªå“åº”æ–‡ä»¶</li>
<li>ç¬¬äº”æ­¥ï¼šè¯·æ±‚ç½‘ç»œ</li>
<li>ç¬¬å…­æ­¥ï¼šå®ç°æ­£ç¡®è§£æjsonæ–‡ä»¶çš„åè®®</li>
<li>ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•é”™è¯¯çŠ¶æ€</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨ä»€ä¹ˆæ ·çš„RESTful APIï¼Ÿ</strong></p>
<p>è®©æˆ‘ä»¬æ¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å§<br> å®ç°ä¸€ä¸ªè·å–Githubç”¨æˆ·ä¿¡æ¯çš„API</p>
<p>è¯­æ³•   </p>
<pre><code>GET https://api.github.com/users/:username
</code></pre><p>ç¤ºä¾‹    </p>
<pre><code>GET https://api.github.com/users/momo13014  
GET https://api.github.com/users/orta  
GET https://api.github.com/users/chriseidhof
</code></pre><p>å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»è¿™ä¸ªé“¾æ¥<a href="https://api.github.com/users/momo13014" target="_blank" rel="noopener">https://api.github.com/users/momo13014 </a>, ä»–å°†ä¼šä»¥jsonæ ¼å¼è¿”å›ç»“æœ<br>å¾ˆç®€å•æ˜¯ä¸æ˜¯ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­å®ç°æˆ‘ä»¬çš„app</p>
<h2 id="1-è®¾è®¡åè®®"><a href="#1-è®¾è®¡åè®®" class="headerlink" title="1.è®¾è®¡åè®®"></a><strong>1.è®¾è®¡åè®®</strong></h2><p>åœ¨ä½ çš„Targetä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå‘½åä¸º<strong>GitHubApiClient.swift</strong><br>æ·»åŠ ä¸€ä¸ªåä¸º<strong>GitHubApiClient</strong>çš„åè®®<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒAPIæˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ª<strong>ç”¨æˆ·å(username)</strong>ä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬åœ¨åè®®ä¸­å®ç°ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç°åœ¨æˆ‘ä»¬éœ€è¦å¤„ç†è¯·æ±‚ç»“æŸåçš„å›è°ƒ. å¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å¸Œæœ›ä»¥ä¸€ä¸ªåˆé€‚çš„æ ¼å¼è·å–ç”¨æˆ·æ•°æ®<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   onSuccess: <span class="params">(GitHubUserData)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line">	                                   </span><br></pre></td></tr></table></figure><br> <strong>GitHubUserData</strong>æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å­˜å‚¨è¿”å›jsonæ•°æ®çš„ç»“æ„ä½“<br> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">GitHubUserData</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> bio: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> email: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> numberOfFollowers: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">var</span> numberOfFollowing: <span class="type">Int</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è·å–å¤±è´¥ä¿¡æ¯<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   onSuccess: <span class="params">(GitHubUserData)</span></span></span> -&gt; <span class="type">Void</span>,</span><br><span class="line">                                     onError: (<span class="type">NSError</span>) -&gt; <span class="type">Void</span>)</span><br></pre></td></tr></table></figure><br>è®©æˆ‘ä»¬ä¸ºä¸¤ä¸ªå›è°ƒè®¾ç½®çš„æ›´æ˜“é˜…è¯»<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">GitHubGetUserCallback</span> = (<span class="type">GitHubUserData</span>) -&gt; <span class="type">Void</span>   </span><br><span class="line"><span class="keyword">typealias</span> <span class="type">ErrorCallback</span> = (<span class="type">NSError</span>) -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure><br>ç°åœ¨ï¼Œæˆ‘ä»¬çš„åè®®åƒè¿™æ ·<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">GitHubGetUserCallback</span> = (<span class="type">GitHubUserData</span>) -&gt; <span class="type">Void</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">ErrorCallback</span> = (<span class="type">NSError</span>) -&gt; <span class="type">Void</span></span><br><span class="line">	</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     onSuccess: GitHubGetUserCallback,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       onError: ErrorCallback)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³éƒ½å®ç°ä¸¤ä¸ªå›è°ƒï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæ”¹æˆ<strong>å¯é€‰(optionals)</strong><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     onSuccess: GitHubGetUserCallback?,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       onError: ErrorCallback?)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº†åè®®è®¾è®¡ï¼Œå»å®ç°ç¼–ç¨‹éƒ¨åˆ†å§ã€‚</p>
<h2 id="2-å®ç°åè®®"><a href="#2-å®ç°åè®®" class="headerlink" title="2.å®ç°åè®®"></a><strong>2.å®ç°åè®®</strong></h2><p>åœ¨iOSä¸­æœ‰è®¸å¤šå®ç°ç½‘ç»œè¯·æ±‚æ–¹æ³•ï¼Œå…¶ä¸­3ä¸ªæœ€å¸¸ä½¿ç”¨çš„æ˜¯<strong>NSURLSession</strong>, <strong>AFNetworking</strong>å’Œ<strong>Alamofire</strong>.<br><strong>NSURLSession</strong><br>æ”¯æŒiOS7åŠä»¥ä¸Š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> SwiftyJSON</span><br><span class="line">	</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NativeApiClient</span>: <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     onSuccess: GitHubGetUserCallback? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       onError: ErrorCallback? = <span class="literal">nil</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> urlString = <span class="string">"https://api.github.com/users/<span class="subst">\(username)</span>"</span></span><br><span class="line">    <span class="keyword">let</span> url = <span class="type">NSURL</span>(string: urlString)!</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">let</span> defaultSession = <span class="type">NSURLSession</span>(configuration: <span class="type">NSURLSessionConfiguration</span>.defaultSessionConfiguration())</span><br><span class="line">    <span class="keyword">let</span> dataTask = defaultSession.dataTaskWithURL(url) &#123; data, response, error <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">let</span> error = error &#123;</span><br><span class="line">        onError?(error)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> data = data &#123;</span><br><span class="line">        <span class="keyword">let</span> json = <span class="type">JSON</span>(data: data)</span><br><span class="line">        onSuccess?(<span class="type">GitHubUserData</span>(json: json))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dataTask.resume()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>AFNetworking</strong><br>è®°ä½åœ¨ä½ çš„Podfileä¸­æ·»åŠ <code>pod &#39;AFNetworking&#39;</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Alamofire</span><br><span class="line"><span class="keyword">import</span> SwiftyJSON</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlamofireApiClient</span>: <span class="title">GitHubApiClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     onSuccess: GitHubGetUserCallback? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       onError: ErrorCallback? = <span class="literal">nil</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> urlString = <span class="string">"https://api.github.com/users/<span class="subst">\(username)</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Alamofire</span>.request(.<span class="type">GET</span>, urlString)</span><br><span class="line">      .validate()</span><br><span class="line">      .responseJSON &#123; response <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">switch</span> response.result &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Success</span>:</span><br><span class="line">          <span class="keyword">if</span> <span class="keyword">let</span> data = response.result.value &#123;</span><br><span class="line">            <span class="keyword">let</span> json = <span class="type">JSON</span>(data)</span><br><span class="line">            onSuccess?(<span class="type">GitHubUserData</span>(json: json))</span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Failure</span>(<span class="keyword">let</span> error):</span><br><span class="line">          onError?(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Alamofire</strong></p>
<p>è®°ä½åœ¨ä½ çš„Podfileä¸­æ·»åŠ <code>pod &#39;Alamofire&#39;</code>  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Alamofire</span><br><span class="line"><span class="keyword">import</span> SwiftyJSON</span><br><span class="line">	</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlamofireApiClient</span>: <span class="title">GitHubApiClient</span> </span>&#123;	</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">requestUserWithUsername</span><span class="params">(username: String,</span></span></span><br><span class="line"><span class="function"><span class="params">                                     onSuccess: GitHubGetUserCallback? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       onError: ErrorCallback? = <span class="literal">nil</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> urlString = <span class="string">"https://api.github.com/users/<span class="subst">\(username)</span>"</span></span><br><span class="line">    <span class="type">Alamofire</span>.request(.<span class="type">GET</span>, urlString)</span><br><span class="line">      .validate()</span><br><span class="line">      .responseJSON &#123; response <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">switch</span> response.result &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Success</span>:</span><br><span class="line">          <span class="keyword">if</span> <span class="keyword">let</span> data = response.result.value &#123;</span><br><span class="line">            <span class="keyword">let</span> json = <span class="type">JSON</span>(data)</span><br><span class="line">            onSuccess?(<span class="type">GitHubUserData</span>(json: json))</span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Failure</span>(<span class="keyword">let</span> error):</span><br><span class="line">          onError?(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-ä½¿ç”¨åè®®"><a href="#3-ä½¿ç”¨åè®®" class="headerlink" title="3.ä½¿ç”¨åè®®"></a><strong>3.ä½¿ç”¨åè®®</strong></h2><p>è¿™ä¸ªç›¸å¯¹ç®€å•ï¼Œç›´æ¥å¼•å…¥å³å¯</p>
<ul>
<li><strong>ç”¨æˆ·å(username)</strong></li>
<li>æˆåŠŸå›è°ƒçš„é—­åŒ…<strong>onSucess</strong></li>
<li>å¤±è´¥å›è°ƒçš„é—­åŒ…<strong>onError</strong></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NativeApiClient</span>.requestUserWithUsername(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(userData)</span><br><span class="line"></span><br><span class="line">&#125;, onError: &#123; error <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æˆ‘ä»¬å¯ä»¥ç§»é™¤æˆ‘ä»¬ä¸å…³å¿ƒçš„å›è°ƒ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NativeApiClient</span>.requestUserWithUsername(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(userData)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>æˆ–è€…<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NativeApiClient</span>.requestUserWithUsername(<span class="string">"hoang-tran"</span>, onError: &#123; error <span class="keyword">in</span></span><br><span class="line">  <span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>æˆ–è€…<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NativeApiClient</span>.requestUserWithUsername(<span class="string">"hoang-tran"</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="4-æ·»åŠ å•å…ƒæµ‹è¯•"><a href="#4-æ·»åŠ å•å…ƒæµ‹è¯•" class="headerlink" title="4.æ·»åŠ å•å…ƒæµ‹è¯•"></a><strong>4.æ·»åŠ å•å…ƒæµ‹è¯•</strong></h2><h5 id="æµ‹è¯•ä»€ä¹ˆï¼Ÿ"><a href="#æµ‹è¯•ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æµ‹è¯•ä»€ä¹ˆï¼Ÿ"></a>æµ‹è¯•ä»€ä¹ˆï¼Ÿ</h5><p>å½“æˆ‘ä»¬è®¨è®ºç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æˆ‘ä»¬è€ƒè™‘:</p>
<ul>
<li>è¯·æ±‚çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Ÿ</li>
<li>å½“è¯·æ±‚æˆåŠŸæ—¶ï¼Œå®ƒæ˜¯å¦æ­£ç¡®çš„è§£æäº†æ•°æ®å¹¶è¿”å›æ­£ç¡®çš„æ¨¡å‹</li>
<li>å½“å®ƒå¤±è´¥æ—¶ï¼Œå®ƒæ˜¯å¦è¿”å›äº†æ­£ç¡®çš„é”™è¯¯ä¿¡æ¯</li>
</ul>
<h5 id="å¦‚ä½•æµ‹è¯•ï¼Ÿ"><a href="#å¦‚ä½•æµ‹è¯•ï¼Ÿ" class="headerlink" title="å¦‚ä½•æµ‹è¯•ï¼Ÿ"></a>å¦‚ä½•æµ‹è¯•ï¼Ÿ</h5><p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªHTTPç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼š<a href="https://github.com/kylef/Mockingjay" target="_blank" rel="noopener">Mockingjay</a><br>å®ƒå…è®¸ä½ ä»¥ä¸‹æ–¹å¼çš„å£°æ˜</p>
<p><code>Stub request with url A and return json file B.</code></p>
<p>æˆ–è€…</p>
<p><code>Stub request with url A and return error.</code></p>
<h5 id="Stubè¿˜èƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#Stubè¿˜èƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="Stubè¿˜èƒ½åšä»€ä¹ˆï¼Ÿ"></a>Stubè¿˜èƒ½åšä»€ä¹ˆï¼Ÿ</h5><p>è¿™æ˜¯ä¸€ä¸ªstubçš„è¯­æ³•</p>
<p><code>Stub event A and do custom action B</code></p>
<p>å®ƒæ„å‘³ç€ï¼š</p>
<blockquote>
<p>  å½“Aè¯·æ±‚å‘ç”Ÿæ—¶ï¼Œä¸å†æ‰§è¡ŒåŸæ–¹æ³•ï¼Œè€Œæ›¿ä»£æ‰§è¡Œè‡ªå®šä¹‰çš„Bæ–¹æ³•</p>
</blockquote>
<p>æ‰€ä»¥ï¼š</p>
<p><code>Stub request with url A and return json file B.</code></p>
<p>ä¹Ÿå°±ç¿»è¯‘æˆ</p>
<blockquote>
<p>å½“æœ‰ä¸€ä¸ªè¯·æ±‚è¿æ¥Aæ—¶ï¼Œä¸æŠŠå®ƒå‘é€åˆ°æœåŠ¡å™¨ï¼Œè€Œæ˜¯ç”¨æˆ‘ä»¬é¡¹ç›®ä¸­æœ¬åœ°Bæ–‡ä»¶ä½œä¸ºå“åº”è¿”å›</p>
</blockquote>
<p>ä¸¾ä¾‹ï¼š<br><code>Stub request with url https://api.github.com/users/hoang-tran
and return the file GetUserSuccess.json</code></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å½“æœ‰ä¸€ä¸ªè¯·æ±‚<strong><a href="https://api.github.com/users/hoang-tran" target="_blank" rel="noopener">https://api.github.com/users/hoang-tran</a></strong>ï¼Œä¸è¦å°†å®ƒå‘é€åˆ°æœåŠ¡å™¨ï¼Œè€Œæ˜¯ç”¨<strong>GetUserSuccess.json</strong>ä½œä¸ºå“åº”è¿”å›</p>
</blockquote>
<p>æ‰€ä»¥ä¸ºä¸€ä¸ªç½‘ç»œè¯·æ±‚ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š</p>
<ol>
<li>æˆªå–ç½‘ç»œè¯·æ±‚ï¼Œè¿”å›æˆ‘ä»¬è‡ªå®šä¹‰çš„jsonæ–‡ä»¶</li>
<li>åˆ©ç”¨åè®®æ‰§è¡Œç½‘ç»œè¯·æ±‚</li>
<li>ä½¿ç”¨<strong>onSuccess</strong>å’Œ<strong>onError</strong>æ¥æè¿°è¿”å›çš„ç»“æœ</li>
</ol>
<h2 id="å‡†å¤‡æµ‹è¯•"><a href="#å‡†å¤‡æµ‹è¯•" class="headerlink" title="å‡†å¤‡æµ‹è¯•"></a><strong>å‡†å¤‡æµ‹è¯•</strong></h2><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ ç†Ÿæ‚‰ä»¥ä¸‹çŸ¥è¯†ï¼š</p>
<ul>
<li><a href="http://hoangtran.me/ios/testing/2016/07/31/how-to-write-unit-tests-in-ios-p1-xctestcase/" target="_blank" rel="noopener">å¦‚ä½•ç¼–å†™å•å…ƒæµ‹è¯•-ç¬¬ä¸€éƒ¨åˆ†: XCTestCase</a></li>
<li><a href="http://hoangtran.me/ios/testing/2016/08/07/how-to-write-unit-tests-in-ios-p2-behavior-driven-development-bdd/" target="_blank" rel="noopener">å¦‚ä½•ç¼–å†™å•å…ƒæµ‹è¯•-ç¬¬ä¸€éƒ¨åˆ†: è¡Œä¸ºé©±åŠ¨(BDD)</a></li>
<li><a href="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/" target="_blank" rel="noopener">ä½¿ç”¨Nimbleæ›´å¥½çš„ç¼–å†™æ–­è¨€</a></li>
</ul>
<h2 id="å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•"><a href="#å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•" class="headerlink" title="å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•"></a><strong>å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•</strong></h2><h3 id="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®åŸå•æµ‹è¯•é¡¹ç›®"><a href="#ç¬¬ä¸€æ­¥ï¼šè®¾ç½®åŸå•æµ‹è¯•é¡¹ç›®" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®åŸå•æµ‹è¯•é¡¹ç›®"></a><strong>ç¬¬ä¸€æ­¥ï¼šè®¾ç½®åŸå•æµ‹è¯•é¡¹ç›®</strong></h3><p>æ‰“å¼€Podfileï¼Œæ·»åŠ ä»¥ä¸‹Podsåˆ°ä½ çš„Targetä¸­</p>
<ul>
<li><strong>Quick</strong>ï¼šä¸€ä¸ªSwiftç¼–å†™çš„è¡Œä¸ºé©±åŠ¨æ¡†æ¶(BDD)</li>
<li><strong>Nimble</strong>: ä¸€ä¸ªæ˜“è¯»çš„æ–­è¨€åº“</li>
<li><strong>Mockingjay</strong>: ç½‘ç»œè¯·æ±‚åº“</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">platform :ios, '<span class="number">9.0</span>'</span><br><span class="line"></span><br><span class="line">target '<span class="type">TestNetworkLayer'</span> <span class="keyword">do</span></span><br><span class="line">  use_frameworks!</span><br><span class="line"></span><br><span class="line">  #...</span><br><span class="line"></span><br><span class="line">  target '<span class="type">TestNetworkLayerTests'</span> <span class="keyword">do</span></span><br><span class="line">    inherit! :search_paths</span><br><span class="line">    pod '<span class="type">Quick'</span></span><br><span class="line">    pod '<span class="type">Nimble'</span></span><br><span class="line">    pod '<span class="type">Mockingjay'</span></span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½ çš„Terminalä¸­å®‰è£…è¿™3ä¸ªåº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€<em>.xcworkspace</em>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open TestNetworkLayer.xcworkspace</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–°çš„specæ–‡ä»¶"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–°çš„specæ–‡ä»¶" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–°çš„specæ–‡ä»¶"></a><strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–°çš„specæ–‡ä»¶</strong></h3><p>åœ¨ä½ çš„Targetä¸­åˆ›å»ºä¸€ä¸ªåä¸º<strong>NativeApiClientSpec.swift</strong>çš„æ–‡ä»¶<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Quick</span><br><span class="line"><span class="keyword">import</span> Nimble</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NativeApiClientSpec</span> : <span class="title">QuickSpec</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">spec</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.spec()</span><br><span class="line">    describe(<span class="string">"first test"</span>) &#123;</span><br><span class="line">      it(<span class="string">"should pass"</span>) &#123;</span><br><span class="line">        expect(<span class="number">1</span>).to(<span class="built_in">equal</span>(<span class="number">1</span>))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œ<strong>Cmd+U</strong>ç¡®å®šæµ‹è¯•é€šè¿‡</p>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™çœŸå®çš„ç½‘ç»œè¯·æ±‚å•å…ƒæµ‹è¯•"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™çœŸå®çš„ç½‘ç»œè¯·æ±‚å•å…ƒæµ‹è¯•" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™çœŸå®çš„ç½‘ç»œè¯·æ±‚å•å…ƒæµ‹è¯•"></a><strong>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™çœŸå®çš„ç½‘ç»œè¯·æ±‚å•å…ƒæµ‹è¯•</strong></h3><p>é¦–å…ˆæ˜¯æˆåŠŸçš„æµ‹è¯•<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">spec</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.spec()</span><br><span class="line">  describe(<span class="string">"requestUserWithName"</span>) &#123;</span><br><span class="line">    context(<span class="string">"success"</span>) &#123;</span><br><span class="line">      it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>åœ¨å®ƒçš„é—­åŒ…ä¸­å®ç°ç½‘ç»œè¯·æ±‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">  <span class="type">NativeApiClient</span>.requestUserWithName(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯·æ±‚æˆåŠŸåï¼Œå­˜å‚¨ç”¨æˆ·æ•°æ®<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> returnedUserData: <span class="type">GitHubUserData</span>?</span><br><span class="line">  <span class="type">NativeApiClient</span>.requestUserWithName(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line">    returnedUserData = userData</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å¸Œæœ›è¿”å›çš„ç”¨æˆ·æ•°æ®æœ‰æœ‰æ•ˆçš„å€¼<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> returnedUserData: <span class="type">GitHubUserData</span>?</span><br><span class="line">  <span class="type">NativeApiClient</span>.requestUserWithName(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line">    returnedUserData = userData</span><br><span class="line">  &#125;)</span><br><span class="line">  expect(returnedUserData).toEventuallyNot(beNil())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>toEventusllyNot</strong>æ„å‘³å®ƒä¼šæŒç»­çš„æ£€æŸ¥<strong>ç”¨æˆ·æ•°æ®</strong>ï¼ŒæŸ¥çœ‹å®ƒæ˜¯å¦æœ‰å€¼(ä¸ä¸ºç©º)</p>
<p>å‡ ç§’åï¼Œç”¨æˆ·æ•°æ®æœ‰å€¼ï¼Œæµ‹è¯•é€šè¿‡ï¼Œå¦åˆ™å¤±è´¥</p>
<p>ç„¶è€Œï¼Œå½“ä½ æ‰§è¡Œæµ‹è¯•(cmd+U)æ—¶ï¼Œå®ƒå¤±è´¥äº†</p>
<p>è¿™æ˜¯ä»¥ä¸ºçœŸå®çš„ç½‘ç»œè¯·æ±‚éœ€è¦èŠ±è´¹æ—¶é—´ï¼Œ<strong>toEventually</strong>ä¸ä¼šç­‰å¤ªé•¿çš„æ—¶é—´ï¼Œå»çœ‹è¿”å›çš„æ•°æ®æ˜¯å¦æœ‰å€¼ï¼Œè¿™å°±å¯¼è‡´äº†å¤±è´¥</p>
<p>é»˜è®¤ç­‰å¾…æ—¶é—´æ˜¯1ç§’ï¼Œå¦‚æœæˆ‘ä»¬è®¾çš„æ›´é•¿ä¸€ç‚¹ï¼Œæµ‹è¯•ä¼šé€šè¿‡</p>
<pre><code>//...

expect(returnedUserData).toEventuallyNot(beNil(), timeout: 20)
</code></pre><p>ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³é‚£æ ·åšï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯<strong>å®Œå…¨ä¸</strong>å»è¯·æ±‚ç½‘ç»œï¼›</p>
<h3 id="ç¬¬å››æ­¥ï¼šåˆ›å»ºå“åº”æ–‡ä»¶"><a href="#ç¬¬å››æ­¥ï¼šåˆ›å»ºå“åº”æ–‡ä»¶" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ›å»ºå“åº”æ–‡ä»¶"></a><strong>ç¬¬å››æ­¥ï¼šåˆ›å»ºå“åº”æ–‡ä»¶</strong></h3><p>æ‰“å¼€Terminalï¼Œå»<strong>TestNetworkLayerTests</strong>æ–‡ä»¶å¤¹ï¼ˆå‡è®¾ä½ çš„æ–‡ä»¶åä¸º<strong>TestNetworkLayer</strong>ï¼‰</p>
<pre><code>cd TestNetworkLayerTests
</code></pre><p>åˆ›å»ºä¸€ä¸ªåä¸º<strong>Fixtures</strong>çš„æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥å®ƒ</p>
<pre><code>mkdir Fixtures

cd Fixtures
</code></pre><p>è¯·æ³¨æ„ï¼š<strong>Fixtures</strong>ä»…æ˜¯ä¸€ä¸ªå­˜æ”¾å…±åŒå“åº”æ–‡ä»¶çš„åå­—ï¼Œä½ å¯ä»¥ä»»æ„å‘½å</p>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„jsonæ–‡ä»¶ï¼Œå‘½åä¸º<strong> GetUserSuccess.json</strong>ï¼Œç„¶åç¼–è¾‘å®ƒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch GetUserSuccess.json</span><br><span class="line">	</span><br><span class="line">open GetUserSuccess.json</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ä½ çš„æµè§ˆå™¨æ€»æ‰“å¼€è¿™ä¸ªé“¾æ¥<a href="https://api.github.com/users/hoang-tran" target="_blank" rel="noopener">https://api.github.com/users/hoang-tran</a></p>
<p>å°†jsonå†…å®¹ç²˜è´´åœ¨<strong>GetUserSuccess.json</strong>æ–‡ä»¶ä¸­</p>
<pre><code>{
  &quot;login&quot;: &quot;hoang-tran&quot;,
  &quot;id&quot;: 6714157,
  &quot;avatar_url&quot;: &quot;https://avatars.githubusercontent.com/u/6714157?v=3&quot;,
  &quot;gravatar_id&quot;: &quot;&quot;,
  &quot;url&quot;: &quot;https://api.github.com/users/hoang-tran&quot;,
  &quot;html_url&quot;: &quot;https://github.com/hoang-tran&quot;,
  &quot;followers_url&quot;: &quot;https://api.github.com/users/hoang-tran/followers&quot;,
  &quot;following_url&quot;: &quot;https://api.github.com/users/hoang-tran/following{/other_user}&quot;,
  &quot;gists_url&quot;: &quot;https://api.github.com/users/hoang-tran/gists{/gist_id}&quot;,
  &quot;starred_url&quot;: &quot;https://api.github.com/users/hoang-tran/starred{/owner}{/repo}&quot;,
  &quot;subscriptions_url&quot;: &quot;https://api.github.com/users/hoang-tran/subscriptions&quot;,
  &quot;organizations_url&quot;: &quot;https://api.github.com/users/hoang-tran/orgs&quot;,
  &quot;repos_url&quot;: &quot;https://api.github.com/users/hoang-tran/repos&quot;,
  &quot;events_url&quot;: &quot;https://api.github.com/users/hoang-tran/events{/privacy}&quot;,
  &quot;received_events_url&quot;: &quot;https://api.github.com/users/hoang-tran/received_events&quot;,
  &quot;type&quot;: &quot;User&quot;,
  &quot;site_admin&quot;: false,
  &quot;name&quot;: &quot;Hoang Tran&quot;,
  &quot;company&quot;: &quot;East Agile Vietnam&quot;,
  &quot;blog&quot;: &quot;http://hoangtran.me/&quot;,
  &quot;location&quot;: &quot;Ho Chi Minh city, VietNam&quot;,
  &quot;email&quot;: &quot;hoangtx.master@gmail.com&quot;,
  &quot;hireable&quot;: null,
  &quot;bio&quot;: &quot;Hi, I&apos;m Hoang. I&apos;m a Swift lover. I blog weekly about iOS development/testing/deployment at http://hoangtran.me/\r\nAnd I happen to love GitHub so much ğŸ˜œ &quot;,
  &quot;public_repos&quot;: 15,
  &quot;public_gists&quot;: 23,
  &quot;followers&quot;: 16,
  &quot;following&quot;: 93,
  &quot;created_at&quot;: &quot;2014-02-18T09:42:07Z&quot;,
  &quot;updated_at&quot;: &quot;2016-08-30T03:04:04Z&quot;
}
</code></pre><p>åœ¨Finderä¸­æ‰“å¼€å½“å‰æ–‡ä»¶å¤¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open .</span><br></pre></td></tr></table></figure>
<p>å°†<strong>Fixtures</strong>æ‹–å…¥åˆ°ä½ çš„æµ‹è¯•Targetæ–‡ä»¶ä¸­</p>
<p><img src="/_images/20171030_001.jpg" alt=""></p>
<p>Xcodeä¼šå‘ä½ ç¡®å®šé“¾æ¥ä¿¡æ¯ï¼Œç¡®ä¿ä½ å°†æ–‡ä»¶å¤¹æ‹–å…¥åˆ°Test Targetè€Œä¸æ˜¯main Targetä¸­<br>ç‚¹å‡»<strong>å®Œæˆ(Finish)</strong></p>
<p><img src="_images/20171030_002.jpg" alt=""></p>
<h3 id="ç¬¬äº”æ­¥ï¼šæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚"><a href="#ç¬¬äº”æ­¥ï¼šæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚"></a><strong>ç¬¬äº”æ­¥ï¼šæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</strong></h3><p>åœ¨<strong>NativeApiClientSpec.swift</strong>ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿè¯·æ±‚ï¼Œä½¿ç”¨æˆ‘ä»¬çš„<strong>GetUserSuccess.json</strong>æ–‡ä»¶ä½œä¸ºå“åº”æ–‡ä»¶ï¼Œè€Œä¸æ˜¯çœŸçš„å»è¯·æ±‚ç½‘ç»œ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> returnedUserData: <span class="type">GitHubUserData</span>?</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 1.</span></span><br><span class="line">  <span class="keyword">let</span> path = <span class="type">NSBundle</span>(forClass: <span class="keyword">self</span>.<span class="keyword">dynamicType</span>).pathForResource(<span class="string">"GetUserSuccess"</span>, ofType: <span class="string">"json"</span>)!</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 2.</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="type">NSData</span>(contentsOfFile: path)!</span><br><span class="line">	</span><br><span class="line">  <span class="comment">// 3.</span></span><br><span class="line">  <span class="keyword">self</span>.stub(uri(<span class="string">"https://api.github.com/users/hoang-tran"</span>), builder: jsonData(data))</span><br><span class="line">	</span><br><span class="line">  <span class="type">NativeApiClient</span>.requestUserWithName(<span class="string">"hoang-tran"</span>, onSuccess: &#123; userData <span class="keyword">in</span></span><br><span class="line">    returnedUserData = userData</span><br><span class="line">  &#125;)</span><br><span class="line">  expect(returnedUserData).toEventuallyNot(beNil())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å®ç°äº†ä»¥ä¸‹æ­¥éª¤</p>
<ol>
<li>è·å–<strong>GetUserSuccess.json </strong>çš„è·¯å¾„</li>
<li>å°†jsonæ–‡ä»¶è½¬æ¢æˆNSData</li>
<li>æˆªå–è¯·æ±‚ï¼Œè¿™æ ·æ¯æ¬¡è¯·æ±‚<a href="https://api.github.com/users/hoang-tran" target="_blank" rel="noopener">https://api.github.com/users/hoang-tran</a>æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå‡çš„jsonæ–‡ä»¶ï¼Œè€Œä¸æ˜¯çœŸçš„ç½‘ç»œè¯·æ±‚</li>
</ol>
<p>ä¸€åˆ‡å°±ç»ªï¼Œæ‰§è¡Œ<strong>Cmd+U</strong>æµ‹è¯•.</p>
<p>è¿™æ¬¡ï¼Œå®ƒåº”è¯¥æ˜¯é€šè¿‡çš„</p>
<p>ä¸ºäº†ç¡®å®šçœŸçš„æ²¡æœ‰å»è¯·æ±‚ç½‘ç»œï¼Œå…³é—­ä½ ç”µè„‘çš„ç½‘ç»œé‡æ–°æµ‹è¯•ï¼Œå®ƒåº”è¯¥è¿˜æ˜¯é€šè¿‡çš„</p>
<h3 id="ç¬¬å…­æ­¥ï¼šæ‰§è¡Œåè®®è§£ææ•°æ®"><a href="#ç¬¬å…­æ­¥ï¼šæ‰§è¡Œåè®®è§£ææ•°æ®" class="headerlink" title="ç¬¬å…­æ­¥ï¼šæ‰§è¡Œåè®®è§£ææ•°æ®"></a><strong>ç¬¬å…­æ­¥ï¼šæ‰§è¡Œåè®®è§£ææ•°æ®</strong></h3><p>æˆ‘ä»¬åº”è¯¥ä¸º<strong>è¿”å›çš„æ•°æ®(returnedUserData )</strong>ç¼–å†™ä¸€äº›æ–­è¨€ï¼Œæ¥ç¡®å®šjsonæ–‡ä»¶è¢«æ­£ç¡®è§£æé“<strong>GitHubUserData</strong>ç»“æ„ä½“ä¸­äº†<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">	</span><br><span class="line">expect(returnedUserData).toEventuallyNot(beNil())</span><br><span class="line">expect(returnedUserData?.name) == <span class="string">"Hoang Tran"</span></span><br><span class="line">expect(returnedUserData?.email) == <span class="string">"hoangtx.master@gmail.com"</span></span><br><span class="line">expect(returnedUserData?.numberOfFollowers) == <span class="number">120</span></span><br><span class="line">expect(returnedUserData?.numberOfFollowing) == <span class="number">133</span></span><br></pre></td></tr></table></figure>    </p>
<h3 id="ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•é”™è¯¯"><a href="#ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•é”™è¯¯" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•é”™è¯¯"></a><strong>ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•é”™è¯¯</strong></h3><p>é¦–å…ˆå£°æ˜é”™è¯¯å†…å®¹<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">spec</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.spec()</span><br><span class="line">	</span><br><span class="line">  describe(<span class="string">"requestUserWithName"</span>) &#123;</span><br><span class="line">    context(<span class="string">"success"</span>) &#123;</span><br><span class="line">      it(<span class="string">"returns GitHubUserData"</span>) &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    context(<span class="string">"error"</span>) &#123;</span><br><span class="line">      it(<span class="string">"returns error"</span>) &#123;</span><br><span class="line">	</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‹¦æˆªè¯·æ±‚è¿”å›é”™è¯¯ä¿¡æ¯<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> error = <span class="type">NSError</span>(domain: <span class="string">"Describe your error here"</span>, code: <span class="number">404</span>, userInfo: <span class="literal">nil</span>)</span><br><span class="line">	</span><br><span class="line"><span class="keyword">self</span>.stub(uri(<span class="string">"https://api.github.com/users/hoang-tran"</span>), builder: failure(error))</span><br></pre></td></tr></table></figure><br>å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">"returns error"</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> returnedError: <span class="type">NSError</span>?</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">let</span> error = <span class="type">NSError</span>(domain: <span class="string">"Describe your error here"</span>, code: <span class="number">404</span>, userInfo: <span class="literal">nil</span>)</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">self</span>.stub(uri(<span class="string">"https://api.github.com/users/hoang-tran"</span>), builder: failure(error))</span><br><span class="line">	</span><br><span class="line">  <span class="type">NativeApiClient</span>.requestUserWithName(<span class="string">"hoang-tran"</span>, onError: &#123; error <span class="keyword">in</span></span><br><span class="line">    returnedError = error</span><br><span class="line">  &#125;)</span><br><span class="line">	</span><br><span class="line">  expect(returnedError).toEventuallyNot(beNil())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>é‡æ–°è¿è¡Œï¼Œä»¥ç¡®ä¿æµ‹è¯•é€šè¿‡</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a><strong>ç»“è¯­</strong></h2><p>æˆ‘æ²¡æƒ³åˆ°ä¼šå†™è¿™ä¹ˆé•¿çš„ä¸€ç¯‡æ–‡ç« ï¼Œè®©æˆ‘ä»¬ç»“æŸå§</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ä»£ç <a href="https://github.com/hoang-tran/TestNetworkLayer" target="_blank" rel="noopener">https://github.com/hoang-tran/TestNetworkLayer</a></p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">æ ‡ç­¾</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/UnitTest/">UnitTest</a> <a class="tag tag--primary tag--small t-link" href="/tags/iOS/">iOS</a> <a class="tag tag--primary tag--small t-link" href="/tags/ç¿»è¯‘/">ç¿»è¯‘</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/11/02/hahha/"  data-tooltip="ä½ å¥½ï¼Œ11æœˆ">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/10/28/55/" data-tooltip="55">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 å¤§ä¸œå“¥. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/11/02/hahha/"  data-tooltip="ä½ å¥½ï¼Œ11æœˆ">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/10/28/55/" data-tooltip="55">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/sd_avatar.JPG" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
            <h4 id="about-card-name">å¤§ä¸œå“¥</h4>
        
            <div id="about-card-bio"><p>ç”Ÿæ´»æ— é™ç¾å¥½</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>å…¨æ ˆå¼€å§‹å·¥ç¨‹å¸ˆ</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Shanghai, China
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">æ²¡æœ‰æ‰¾åˆ°æ–‡ç« </div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2016/05/09/hello-hexo/">
                            <h3 class="media-heading">Hello hexo</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´5æœˆ9æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2016/11/05/Git-command/">
                            <h3 class="media-heading">Gitå¸¸ç”¨å‘½ä»¤</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´11æœˆ5æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>è®°å½•ä¸€ä¸‹Gitçš„å¸¸ç”¨å‘½ä»¤<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/01/28/WebStor,Sublime Textçš„ä½¿ç”¨/">
                            <h3 class="media-heading">WebStorm, Sublime Textçš„ä½¿ç”¨</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´1æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>WebStormå’ŒSublime Textä½œä¸ºå¸¸ç”¨çš„å·¥å…·ï¼Œè®°å½•ä¸€ä¸‹æ‰©å±•ä½¿ç”¨çš„æ–¹æ³•å’ŒåŒ…ç®¡ç†</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/05/05/äº†è§£Node-js/">
                            <h3 class="media-heading">äº†è§£Node.js</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´5æœˆ5æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Node.jsä½œä¸ºä¸€ä¸ªJavaScriptç¼–å†™çš„webæ¡†æ¶ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæ–¹ä¾¿ä½¿ç”¨çš„åœ°æ–¹ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/Netlayer-test/">
                            <h3 class="media-heading">Netlayer-test</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/Markdownè¯­æ³•/">
                            <h3 class="media-heading">Markdownè¯­æ³•</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/freeAPIS/">
                            <h3 class="media-heading">test blog</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/Little-Room/">
                            <h3 class="media-heading">Little Room</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/333/">
                            <h3 class="media-heading">333</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/44/">
                            <h3 class="media-heading">44</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/28/55/">
                            <h3 class="media-heading">55</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ28æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/10/29/NetLayerUnitTest/">
                            <h3 class="media-heading">å¦‚ä½•åœ¨iOSæ€»å•å…ƒæµ‹è¯•ç½‘ç»œå±‚</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´10æœˆ29æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>ç½‘ç»œé€šä¿¡åœ¨æ¯ä¸ªiOSAPPä¸­éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚<br>åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•å¯¹ç½‘ç»œå±‚è¿›è¡Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³å¿ƒçš„ä¸€ä¸ªé‡ç‚¹ï¼Œé‚£æˆ‘ä»¬ä»Šå¤©æ¥æ¢è®¨ä¸€ä¸‹<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/11/02/hahha/">
                            <h3 class="media-heading">ä½ å¥½ï¼Œ11æœˆ</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´11æœˆ2æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>11æœˆï¼Œå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½è¢«å–„å¾…ï¼<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2017/11/05/CocoaPodsç§æœ‰repo/">
                            <h3 class="media-heading">CocoaPodsç§æœ‰repo</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017å¹´11æœˆ5æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong><a href="https://cocoapods.org/" target="_blank" rel="noopener">CocoaPods</a></strong> ä½œä¸ºiOSå¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç»™æˆ‘ä»¬å¼€å‘å¸¦æ¥äº†å¾ˆå¤šä¾¿åˆ©ä¹‹å¤„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ«äººçš„ä½œå“æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„å¼€å‘ï¼Œæ¯”å¦‚è‘—åçš„<code>AFNetworking</code>ï¼Œ<code>Masonry</code>ç­‰ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å°†è‡ªå·±å›¢é˜Ÿçš„<em>Pod</em>é›†ä¸­ç®¡ç†ï¼Œåˆå’Œå®˜æ–¹çš„åŒºåˆ«å¼€æ¥ï¼Œè¿™é‡Œå°±éœ€è¦åˆ›å»ºè‡ªå·±å›¢é˜Ÿçš„<em>Repo</em>ã€‚<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://mistdon.github.io/2018/01/07/ç†è§£Swiftçš„Copy-on-writeæœºåˆ¶/">
                            <h3 class="media-heading">ç†è§£Swiftçš„Copy-on-writeæœºåˆ¶</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2018å¹´1æœˆ7æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>ç¿»è¯‘ï¼šåŸæ–‡é“¾æ¥ï¼š<a href="https://medium.com/@lucianoalmeida1/understanding-swift-copy-on-write-mechanisms-52ac31d68f2f" target="_blank" rel="noopener">Understanding Swift Copy-on-Write mechanisms</a></p>
<p>åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬æœ‰å¼•ç”¨ç±»å‹(ç±»Classes)å’Œå€¼ç±»å‹(ç»“æ„ä½“Structs, å…ƒç¥–Tuples, æšä¸¾enums)ã€‚å€¼ç±»å‹æœ‰ä¸€ä¸ªCopyæœºåˆ¶: å¦‚æœä½ å°†ä¸€ä¸ªå€¼ç±»å‹å˜é‡èµ‹å€¼ç»™ä½ ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…å°†å®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°(inoout å‚æ•°é™¤å¤–), è¿™ä¸ªå€¼ç±»å‹çš„æ•°æ®å°†ä¼šè¢«Copyã€‚ä½ å°†ä¼šæœ‰ä¸¤ä¸ªç›¸åŒå†…å®¹çš„å€¼ï¼ŒåŒæ—¶è¢«å£°æ˜äº†ä¸¤ä¸ªä¸åŒçš„å†…å­˜ç©ºé—´ã€‚å…³äºå¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹çš„åŒºåˆ«ï¼Œè¯·å‚èµ›<a href="https://developer.apple.com/swift/blog/?id=10" target="_blank" rel="noopener">Appleå®˜æ–¹å†…å®¹</a>ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="æ²¡æœ‰æ‰¾åˆ°æ–‡ç« "
                data-message-one="æ‰¾åˆ° 1 ç¯‡æ–‡ç« "
                data-message-other="æ‰¾åˆ° {n} ç¯‡æ–‡ç« ">
                æ‰¾åˆ° 15 ç¯‡æ–‡ç« 
            </p>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-ivwiy10zeb8fifc4swnhkwneuk64y53w2scmdmtp8thi9cqfxh31aowtroaz.min.js"></script>
<!--SCRIPTS END-->

    


    </body>
</html>
